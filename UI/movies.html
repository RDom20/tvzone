<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TVZone</title>
  <style>
    /* Basic reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #9d9eb127;
      color: #333;
      line-height: 1.6;
      max-width: 1920px;
      margin: 0 auto;
    }

    .hover:hover {
      transform: scale(1.2);
      transition: transform 0.2s ease-in-out, font-size 0.2s ease-in-out;
    }

    button {
      list-style: none;
      appearance: none;
      background: none;
      border: none;
      padding: 0;
      margin: 0;
      font-family: Arial, sans-serif;
      font-size: 22px;
      font-weight: bold;
      color: inherit;
      cursor: pointer;
    }

    header {
      background-color: #122f6b;
      color: #ffffff;
      padding: 20px 0;
    }

    header .container {
      max-width: 1920px;
      margin: 0 auto;
      padding: 0 15px;

      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    /* LEFT SIDE: Logo + nav links */
    .nav-left {
      display: flex;
      align-items: center;
      gap: 35px;
      /* egys√©ges t√°vols√°g a linkek k√∂z√∂tt */
      padding: 0 20px;
      /* egyforma bels≈ë t√°vols√°g a sz√©lekt≈ël */
      flex-shrink: 0;
    }

    .logo {
      display: flex;
      align-items: center;
      height: 60px;
      padding-left: 20px;
    }

    .logo img {
      height: 60px;
      width: 90px;
      margin-left: 20px;
      stroke: #ffffff;
      cursor: pointer;
      transition: transform 0.2s ease;
      transform: scale(2.5);
    }

    .logo img:hover {
      transform: scale(3);
      margin-bottom: 5px;
    }




    /* CENTER: Search bar and nav styles */

    nav ul {
      list-style: none;
      display: flex;
      gap: 20px;
      /* egys√©ges t√°vols√°g a linkek k√∂z√∂tt */
      margin: 0;
      /* elt√°vol√≠tjuk az alap margin-t */
      padding: 0;
      /* elt√°vol√≠tjuk az alap padding-et */
    }

    nav ul li a {
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      font-size: 30px;
      padding: 8px 12px;
      border-radius: 4px;
      transition: background-color 0.3s ease;
      white-space: nowrap;
    }

    nav ul li a:hover {
     transform: scale(1.5);
    }

    .nav-center {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      /* fixed: was 'center-100' */
      padding: 0 10px;
      min-width: 600px;
      position: relative;
      /* for icon positioning */
      max-width: 400px;
      /* control max width */
      width: 100%;
      /* full width in container */
      /* if there is any margin-left causing the offset */

    }

    .nav-center input[type="search"] {
      width: 100%;
      padding: 8px 20px 8px 40px;
      /* left padding for icon */
      border: none;
      border-radius: 4px;
      font-size: 20px;
      box-sizing: border-box;
      outline: none;
      color: #060316;
    }

    /* Search icon inside input */
    .nav-center svg.search-icon {
      position: absolute;
      top: 45%;
      left: 10px;
      transform: translateY(-50%);
      width: 25px;
      height: 25px;
      stroke: #060316;
      pointer-events: none;
      /* allows clicking input under icon */
    }

    #theme-toggle {
      font-size: 90px;
      /* üî∏ Itt √°ll√≠thatod a m√©retet ‚Äî pl. 24px, 28px, 32px */
      height: 40px;
      width: 40px;
      cursor: pointer;
      transition: transform 0.2s ease;
      transform: scale(2.5);
      margin-right: 20px;
      margin-top: 20px;
    }

    #theme-toggle:hover {
      transform: scale(3.5);

    }



    /* RIGHT SIDE: Login button */
    .nav-right {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-right: 10px;
      /* No need for extra spacing, gap handles it */
    }

    .nav-right ul {
      list-style: none;
      margin-right: 20px;
      padding: 0;
      display: flex;
    }

    .nav-right ul li a {
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      font-size: 30px;
      padding: 8px 12px;
      border-radius: 4px;
      transition: background-color 0.3s ease;
      white-space: nowrap;
    }

    .nav-right ul li a:hover {
      transform: scale(1.5);
    }

    .login-btn {
      background-color: transparent;
      border: none;
      color: #fff;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      font-size: 30px;
      transition: background-color 0.3s ease;
      white-space: nowrap;
    }

    .login-btn:hover {
      transform: scale(1.5);
    }


    /* Main content styling (your original styles) */
    main {
      max-width: 1920px;
      margin: 40px auto;
      padding: 0 15px;
    }

    section {
      margin-bottom: 50px;
    }

    section h2 {
      position: relative;
      margin-left: 10px;
      font-size: 35px;
      color: #122f6b;
      padding-bottom: 10px;
      width: fit-content;
    }

    /* Lekerek√≠tett als√≥ szeg√©ly */
    section h2::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      height: 10px;
      width: 120%;
      background-color: #122f6b;
      border-radius: 4px;
      margin-bottom: 5px;
    }

    .carousel-wrapper {
      position: relative;
    }

    .carousel {
      overflow: hidden;
      width: 1800px;
      height: 500px;
      margin: 0 auto;
      /* EZ teszi k√∂z√©pre */
      overflow: hidden;
    }

    .carousel-track {
      display: flex;
      transition: transform 0.5s ease-in-out;
      gap: 10px;
      margin-left: 5px;
      /* Kiv√°ltja a margin-right-ot */
    }

    .carousel-item {
      flex: 0 0 calc((100% - 45px) / 5);
      /* 5 elem k√∂z√∂tt 4 r√©s van, azaz 4 * 10px = 40px */
      background: #9d9eb127;
      box-shadow: 0 2px 6px #0000001a;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      
    }

    .carousel-item img {
  width: 350px;
  height: 400px;
  object-fit: cover;
  display: block;
}

    .carousel-item .info {
      padding: 12px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .carousel-item .info h3 {
      font-size: 20px; 
      margin-bottom: 6px;
      color: #122f6b;
      font-weight: bold;

    }

    .carousel-item .info p {
      font-size: 18px; 
      color: #173c88;
      font-weight: bold;
    }

    .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(18, 47, 107, 0.7);
      border: none;
      color: white;
      padding: 8px 14px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 30px;
      z-index: 10;
      transition: background-color 0.3s ease;
      user-select: none;
    }

    .carousel-button:hover {
      background-color: #122f6b;
    }

    .carousel-button.prev {
      left: 0;
    }

    .carousel-button.next {
      right: 0;
    }

    footer {
      background-color: #122f6b;
      color: #ccc;
      padding: 25px 0;
      text-align: center;
      margin-top: 50px;
    }

    footer a {
      color: #fff;
      margin: 0 12px;
      text-decoration: none;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Responsive */
    @media(max-width: 900px) {
      .carousel-item img {
        height: 220px;
      }
    }

    @media(max-width: 700px) {
      .carousel-item {
        min-width: calc(100% / 3);
      }
    }

    @media(max-width: 450px) {
      .carousel-item {
        min-width: calc(100% / 2);
      }

      header .container {
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
      }

      .nav-left,
      .nav-center,
      .nav-right {
        flex-basis: 100%;
        justify-content: center;
      }

      nav ul {
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
      }


    }

        /* Dark mode styling */
    body.dark-mode {
      background-color: #1a1a1a;
      color: #060316;
    }

    body.dark-mode header {
      background-color: #0a1b3f;
      color: #b8b8b8;
    }

    body.dark-mode header .nav-center input[type="search"] {
      background-color: #060316;
      color: #b8b8b8;
    }

    body.dark-mode header .nav-center svg.search-icon {
      color: #b8b8b8;
    }

    body.dark-mode header nav a,
    body.dark-mode header .nav-right ul li a {
      color: #b8b8b8;
    }

    body.dark-mode #theme-toggle {
      fill: #b8b8b8;

    }

    body.dark-mode .login-btn {
      color: #b8b8b8;
    }

    body.dark-mode .carousel-item .info h3 {
      color: #283999;
    }

    /*color: #2b3ea7;
      text-shadow:
    -1px -1px 0 #6d7bca,  
     1px -1px 0 #6d7bca,
    -1px  1px 0 #6d7bca,
     1px  1px 0 #6d7bca;*/

    body.dark-mode .carousel-item .info p {
      color: #283999;
    }

    body.dark-mode h2 {
      color: #2c3c94;
    }

    body.dark-mode h2::after {
      background-color: #2c3c94;
    }

    body.dark-mode .carousel-button.prev {
      left: 0;
      background-color: #151c7c;
      color: #b8b8b8;
    }

    body.dark-mode .carousel-button.next {
      right: 0;
      background-color: #151c7c;
      color: #b8b8b8;
    }

    footer {
      background-color: #0a1b3f;
      color: #b8b8b8;
    }

    footer a {
      color: #b8b8b8;
    }
  </style>
</head>

<body>
    <header>
        <div class="container">
            <div class="nav-left">
                <a href="home.html" class="logo">
                    <img src="logo.png" alt="TVZone Logo" style="height: 50px;">
                </a>

                <nav>
                    <ul>
                        <li><a href="movies.html">Movies</a></li>
                        <li><a href="series.html">Series</a></li>
                        <li><a href="animes.html">Animes</a></li>
                        <li><a href="#">Filter</a></li>
                    </ul>
                </nav>
            </div>

            <div class="nav-center">
                <input type="search" placeholder="Search..." />
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="7"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </div>

            <div class="nav-right">
                <svg id="theme-toggle" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#ffffff"
                    viewBox="0 0 24 24" style="margin-left: 50px; cursor: pointer;">
                    <path d="M21 12.79A9 9 0 0111.21 3 7 7 0 1021 12.79z"></path>
                </svg>
                <ul>
                    <li><a href="#">Contact</a></li>
                </ul>
                <button class="login-btn">Login</button>
                <script src="login.js"></script>
            </div>

    </header>


    <main>
       <script>
/**
 * A film c√≠m√©b≈ël bor√≠t√≥k√©p URL-t gener√°l.
 * A title param√©tert URL-biztoss√° alak√≠tja,
 * majd a backend /covers mapp√°j√°ra mutat√≥ el√©r√©si utat hoz l√©tre.
 */    function getCoverSrc(title) {
      return `http://localhost:3000/covers/${encodeURIComponent(title)}.jpg`;
    }
  </script>
        <!-- Trending -->
        <section>
            <h2>Trending</h2>
            <div class="carousel-wrapper">
                <button class="carousel-button prev" data-carousel="trending">&#8249;</button>
                <div class="carousel" id="carousel-trending">
                    <div class="carousel-track">
                        <div class="carousel-item">
                             <img />
                            <div class="info">
                                <h3>Batman Begins</h3>
                                <p>Action ‚Ä¢ 2024</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>Ace Ventura Pet Detective</h3>
                                <p>Drama ‚Ä¢ 2023</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>The Matrix</h3>
                                <p>Sci-Fi ‚Ä¢ 2022</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>The Dark Knight</h3>
                                <p>Comedy ‚Ä¢ 2021</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>Trending Title 5</h3>
                                <p>Thriller ‚Ä¢ 2025</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>Trending Title 6</h3>
                                <p>Horror ‚Ä¢ 2020</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>Trending Title 7</h3>
                                <p>Romance ‚Ä¢ 2019</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>Trending Title 8</h3>
                                <p>Fantasy ‚Ä¢ 2023</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                            <div class="info">
                                <h3>Trending Title 9</h3>
                                <p>Adventure ‚Ä¢ 2024</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                          />
                            <div class="info">
                                <h3>Trending Title 10</h3>
                                <p>Documentary ‚Ä¢ 2022</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="carousel-button next" data-carousel="trending">&#8250;</button>
            </div>
        </section>

        <!-- Latest Movies -->
        <section>
            <h2>Latest Movies</h2>
            <div class="carousel-wrapper">
                <button class="carousel-button prev" data-carousel="movies">&#8249;</button>
                <div class="carousel" id="carousel-movies">
                    <div class="carousel-track">
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 1</h3>
                                <p>Action ‚Ä¢ 2024</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 2</h3>
                                <p>Drama ‚Ä¢ 2023</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 3</h3>
                                <p>Sci-Fi ‚Ä¢ 2022</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 4</h3>
                                <p>Comedy ‚Ä¢ 2021</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 5</h3>
                                <p>Thriller ‚Ä¢ 2025</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 6</h3>
                                <p>Horror ‚Ä¢ 2020</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 7</h3>
                                <p>Action ‚Ä¢ 2024</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img /><div class="info">
                                <h3>Movies Title 8</h3>
                                <p>Drama ‚Ä¢ 2023</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />
                          <div class="info">
                                <h3>Movies Title 9</h3>
                                <p>Sci-Fi ‚Ä¢ 2022</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                          <img />

                            <div class="info">
                                <h3>Movies Title 10</h3>
                                <p>Comedy ‚Ä¢ 2021</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="carousel-button next" data-carousel="movies">&#8250;</button>
            </div>
        </section>
    </main>

    <footer>
        &copy; 2024 TVZone. All rights reserved.
        <br />
        <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
    </footer>


 <script>


    /**
 * Megnyitja a teljes k√©perny≈ës vide√≥lej√°tsz√≥t.
 * A vide√≥ forr√°s√°t a felhaszn√°l√≥ g√©p√©n l√©v≈ë mp4-re √°ll√≠tja,
 * majd elind√≠tja a lej√°tsz√≥t egy overlayben.
 */
    function openFullVideo() {
      const videoOverlay = document.getElementById('videoOverlay');
      const mainVideo = document.getElementById('mainVideo');
      
      // Set full video source
      mainVideo.src = `C:\\Users\\rdomi\\OneDrive - Ny√≠regyh√°zi Egyetem (Student)\\TVZone\\data\\Movies\\${title}.mp4`;
      mainVideo.load();
      
      videoOverlay.style.display = 'block';
      mainVideo.play();
    }

    /**
 * Le√°ll√≠tja a teljes film lej√°tsz√°s√°t,
 * elrejti az overlayt.
 */
    function closeFullVideo() {
      const videoOverlay = document.getElementById('videoOverlay');
      const mainVideo = document.getElementById('mainVideo');
      
      mainVideo.pause();
      videoOverlay.style.display = 'none';
    }

    /**
 * A vide√≥ play/pause √°llapot√°t v√°ltja.
 * A gomb ikonj√°t is √°t√≠rja (‚ñ∂ / ‚ùö‚ùö).
 */
    function togglePlay() {
      const mainVideo = document.getElementById('mainVideo');
      const playIcon = document.getElementById('playIcon');
      
      if (mainVideo.paused) {
        mainVideo.play();
        playIcon.textContent = '‚ùö‚ùö';
      } else {
        mainVideo.pause();
        playIcon.textContent = '‚ñ∂';
      }
    }

    /**
 * El≈ëre vagy visszatekeri a vide√≥t 'seconds' m√°sodperccel.
 * negat√≠v √©rt√©k ‚Üí vissza
 * pozit√≠v √©rt√©k ‚Üí el≈ëre
 */
    function skipTime(seconds) {
      const mainVideo = document.getElementById('mainVideo');
      mainVideo.currentTime += seconds;
    }

    /**
 * A be√°ll√≠t√°si oldals√≥ men√ºk (felirat, sebess√©g, min≈ës√©g)
 * k√∂z√ºl csak azt az egyet nyitja meg, amelyikre kattintottak,
 * a t√∂bbit automatikusan bez√°rja.
 */
    function toggleMenu(menuType) {
      const menus = ['ccMenu', 'speedMenu', 'qualityMenu'];
      menus.forEach(menu => {
        const element = document.getElementById(menu);
        if (menu === menuType + 'Menu') {
          element.classList.toggle('active');
        } else {
          element.classList.remove('active');
        }
      });
    }

    /**
 * Be√°ll√≠tja a vide√≥ sebess√©g√©t (0.5x‚Äì2x),
 * m√≥dos√≠tja a sebess√©g gombon l√°that√≥ feliratot,
 * majd bez√°rja a sebess√©gmen√ºt.
 */
    function setSpeed(speed) {
      const mainVideo = document.getElementById('mainVideo');
      mainVideo.playbackRate = speed;
      document.querySelector('[title="Speed"]').textContent = speed + 'x';
      toggleMenu('speed');
    }

    /**
 * A vide√≥ min≈ës√©g√©nek √°t√°ll√≠t√°s√°ra szolg√°lna,
 * azonban jelenleg m√©g nincs teljes funkcionalit√°s.
 * Csak a gomb sz√∂veg√©t friss√≠ti.
 */
    function setQuality(quality) {
      // Implement quality change logic here
      document.querySelector('[title="Quality"]').textContent = quality;
      toggleMenu('quality');
    }

    /**
 * A feliratok st√≠lus√°t m√≥dos√≠tan√° (sz√≠n, m√©ret, h√°tt√©r),
 * de a funkci√≥ m√©g nem teljesen implement√°lt.
 * Csak az el≈ëk√©sz√≠tett track-re hivatkozik.
 */
    function updateCCStyle(property, value) {
      const track = document.getElementById('mainVideo').textTracks[0];
      if (track) {
        // Implement CC style updates here
      }
    }

    /**
 * Reakci√≥ gombok (Like, Dislike, Super Like)
 * akt√≠v √°llapot√°nak ki/be kapcsol√°sa.
 */
    function toggleReaction(type) {
      const button = document.querySelector(`[title="${type === 'superlike' ? 'Super Like' : type === 'like' ? 'Like' : 'Dislike'}"]`);
      button.classList.toggle('active');
    }

    /**
 * A film hozz√°ad√°sa vagy elt√°vol√≠t√°sa a watchlistb≈ël.
 * Csak a gomb vizu√°lis √°llapot√°t v√°ltja √°t.
 */
    function toggleWatchlist() {
      const button = document.querySelector('[title="Add to Watchlist"]');
      button.classList.toggle('active');
    }

    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      const mainVideo = document.getElementById('mainVideo');
      if (document.getElementById('videoOverlay').style.display === 'block') {
        switch(e.key.toLowerCase()) {
          case ' ':
            e.preventDefault();
            togglePlay();
            break;
          case 'f':
            e.preventDefault();
            if (!document.fullscreenElement) {
              document.getElementById('videoOverlay').requestFullscreen();
            } else {
              document.exitFullscreen();
            }
            break;
          case 'escape':
            if (document.fullscreenElement) {
              document.exitFullscreen();
            } else {
              closeFullVideo();
            }
            break;
          case 'arrowleft':
          case 'a':
            skipTime(-5);
            break;
          case 'arrowright':
          case 'd':
            skipTime(5);
            break;
        }
      }
    });

    /**
 * A vide√≥ id≈ëtartam√°t vagy aktu√°lis poz√≠ci√≥j√°t
 * felhaszn√°l√≥bar√°t "perc:m√°sodperc" form√°tumra alak√≠tja.
 */
    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      seconds = Math.floor(seconds % 60);
      return `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }
  </script>

  <script>

  /**
 * Minden carouselhez elk√©sz√≠ti a lapoz√°st.
 * A prev/next gombok az itemWidth alapj√°n
 * eltolj√°k a track-et balra vagy jobbra.
 * A resize esem√©ny √∫jrasz√°molja a poz√≠ci√≥t.
 */
  document.querySelectorAll('.carousel-wrapper').forEach(wrapper => {
    const track = wrapper.querySelector('.carousel-track');
    const prevButton = wrapper.querySelector('.carousel-button.prev');
    const nextButton = wrapper.querySelector('.carousel-button.next');
    const items = wrapper.querySelectorAll('.carousel-item');
    const itemWidth = items[0].getBoundingClientRect().width + 10; // 10px gap

    let currentIndex = 0;

    prevButton.addEventListener('click', () => {
      currentIndex = Math.max(currentIndex - 1, 0);
      track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
    });

    nextButton.addEventListener('click', () => {
      const maxIndex = items.length - Math.floor(wrapper.querySelector('.carousel').offsetWidth / itemWidth);
      currentIndex = Math.min(currentIndex + 1, maxIndex);
      track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
    });

    window.addEventListener('resize', () => {
      // Reset transform on resize to prevent misalignment
      track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
    });
  });

  /**
 * A s√∂t√©t m√≥dot kapcsolja.
 * A body.dark-mode oszt√°ly felv√°ltva be/ki kapcsolva.
 * A felhaszn√°l√≥ v√°laszt√°s√°t elmenti a localStorage-ba.
 */
  const themeToggle = document.getElementById('theme-toggle');
  themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    // Optional: store preference in localStorage
    localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
  });

  // Optional: load stored dark mode preference
  if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark-mode');
  }

  /**
 * Megh√≠vja a helyi Node.js backend /api/scan v√©gpontj√°t,
 * amely megkeresi a filmhez tartoz√≥:
 *  - mapp√°kat (S01, S02‚Ä¶)
 *  - epiz√≥dokat
 *  - relat√≠v el√©r√©si utakat
 * A frontend ebb≈ël √©p√≠ti √∂ssze a "details" oldalt.
 */
  async function scanMoviesDirectory(title) {
    try {
      // call local server at :3000 (must be running)
      const resp = await fetch(`http://localhost:3000/api/scan?title=${encodeURIComponent(title)}`);
      if (!resp.ok) {
        console.error('API scan failed', resp.statusText);
        return null;
      }
      const data = await resp.json();
      // normalize to the shape details.html expects: { 'Season 1': [ {name,path,title}, ... ] }
      if (data && data.episodes) return data.episodes;
      return null;
    } catch (err) {
      console.error('Error calling scan API:', err);
      return null;
    }
  }

  /**
 * Lek√©ri a backend /api/movies v√©gpontj√°t√≥l
 * a filmhez tartoz√≥ metaadatokat (pl. le√≠r√°s, √©v, kateg√≥ria).
 */
  async function fetchMovies(title) {
  try {
    const resp = await fetch(`http://localhost:3000/api/movies?title=${encodeURIComponent(title)}`);
    if (!resp.ok) {
      console.error('API error', resp.statusText);
      return null;
    }
    const data = await resp.json();
    return data;
  } catch (err) {
    console.error('Fetch error', err);
    return null;
  }
}

  /**
 * Megnyitja a sorozatepiz√≥d lej√°tsz√≥t,
 * be√°ll√≠tja a vide√≥ URL-j√©t (backend streaming),
 * ki√≠rja a szezont √©s epiz√≥dsz√°mot,
 * majd megjelen√≠ti az overlayt.
 */
  function openEpisodePlayer(ep, seasonKey, episodeIndex) {
    const videoOverlay = document.getElementById('videoOverlay');
    const mainVideo = document.getElementById('mainVideo');
    const titleElem = document.getElementById('videoTitle');
    const descElem = document.getElementById('videoDescription');

    // Vide√≥ forr√°s URL (streamel√©s a Node szerverr≈ël)
    const videoUrl = `http://localhost:3000${ep.path}`;
    console.log("‚ñ∂ Bet√∂lt√©s:", videoUrl);

    mainVideo.src = videoUrl;
    titleElem.textContent = `${seasonKey} ‚Ä¢ Episode ${episodeIndex + 1}`;
    descElem.textContent = ep.name || '';

    // Mutatjuk az overlayt
    videoOverlay.style.display = 'block';
    mainVideo.load();
    mainVideo.pause();

    alert(`${seasonKey} E${episodeIndex + 1} bet√∂ltve`);
  }

  function togglePlay() {
    const mainVideo = document.getElementById('mainVideo');
    const playIcon = document.getElementById('playIcon');

    if (mainVideo.paused) {
      mainVideo.play();
      playIcon.textContent = '‚ùö‚ùö';
    } else {
      mainVideo.pause();
      playIcon.textContent = '‚ñ∂';
    }
  }

  /**
 * Bez√°rja a sorozat epiz√≥dlej√°tsz√≥t,
 * le√°ll√≠tja a vide√≥t.
 */
  function closeEpisodePlayer() {
    const videoOverlay = document.getElementById('videoOverlay');
    const mainVideo = document.getElementById('mainVideo');
    mainVideo.pause();
    videoOverlay.style.display = 'none';
  }
</script>

<!-- Netflix-st√≠lus√∫ lej√°tsz√≥ -->
<div class="video-overlay" id="videoOverlay" style="display:none;">
  <button class="close-btn" onclick="closeEpisodePlayer()">‚úï</button>
  <div class="video-container">
    <video id="mainVideo" class="main-video" controls>
      <source src="" type="video/mp4" />
    </video>
    <div class="controls">
      <button onclick="togglePlay()"><span id="playIcon">‚ñ∂</span></button>
      <div><span id="currentTime">0:00</span> / <span id="duration">0:00</span></div>
    </div>
  </div>
  <div class="video-info">
    <h2 id="videoTitle"></h2>
    <p id="videoDescription"></p>
  </div>
</div>

<script>

  /**
 * Minden carousel k√°rtya kattinthat√≥.
 * R√°kattintva:
 *  - lek√©ri az adott filmhez tartoz√≥ mapp√°kat/epiz√≥dokat
 *  - ha van epiz√≥d ‚Üí sorozat r√©szlete oldalra megy
 *  - ha nincs ‚Üí film r√©szlete oldalra megy
 */
  document.addEventListener('DOMContentLoaded', () => {
    console.log('Setting up click handlers for carousel items');
    document.getElementById('mainVideo').addEventListener('timeupdate', () => {
      const mainVideo = document.getElementById('mainVideo');
      const progress = document.getElementById('progress');
      const currentTimeSpan = document.getElementById('currentTime');
      const durationSpan = document.getElementById('duration');
      
      const percent = (mainVideo.currentTime / mainVideo.duration) * 100;
      progress.style.width = percent + '%';
      
      currentTimeSpan.textContent = formatTime(mainVideo.currentTime);
      durationSpan.textContent = formatTime(mainVideo.duration);
    });
    document.querySelectorAll('.carousel-item').forEach(item => {
      item.addEventListener('click', async () => {
        const title = item.querySelector('h3').textContent.trim();
        console.log('Clicked movie:', title); // Debug log
      
        try {
          const episodesData = await scanMoviesDirectory(title);
          console.log('Scanned episodes data:', episodesData); // Debug log
          
          if (episodesData && Object.keys(episodesData).length > 0) {
            const queryParams = new URLSearchParams({
              title: title,
              episodes: JSON.stringify(episodesData)
            });
            const url = 'details.html?' + queryParams.toString();
            console.log('Redirecting to:', url);
            location.href = url;
          } else {
            console.error('No movie found in directory');
            const url = 'details.html?title=' + encodeURIComponent(title);
            location.href = url;
          }
        } catch (error) {
          console.error('Error handling movie click:', error);
          const url = 'details.html?title=' + encodeURIComponent(title);
          location.href = url;
        }
      });
    });
  });
</script>

<script src="auth.js"></script>
<script>
  function checkAuth() {
  return !!localStorage.getItem("loggedInUser");
}
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".carousel-item").forEach(item => {
    const title = item.querySelector("h3")?.textContent.trim();
    if (!title) return;

    const img = item.querySelector("img");
    if (!img) return;

    // Lok√°lis k√©p URL
    const coverUrl = `http://localhost:3000/covers/${encodeURIComponent(title)}.jpg`;
    const fallbackUrl = "default-thumbnail.png";

    // 1Ô∏è‚É£ el≈ësz√∂r default k√©pet √°ll√≠tunk be
    img.src = fallbackUrl;

    // 2Ô∏è‚É£ ut√°na √∫j k√©pet pr√≥b√°lunk bet√∂lteni JavaScript Image objektummal
    const testImg = new Image();
    testImg.onload = () => {
      // ha bet√∂lt≈ëd√∂tt, lecser√©lj√ºk
      img.src = coverUrl;
    };
    testImg.onerror = () => {
      console.warn(`‚ö†Ô∏è Nem tal√°lhat√≥ bor√≠t√≥: ${title}`);
    };
    testImg.src = coverUrl; // ez ind√≠tja a bet√∂lt√©st
  });
});
</script>

<script>
document.addEventListener("click", e => {
  const card = e.target.closest(".movies-card");
  if (!card) return;

  const title = card.dataset.title;

  window.location.href =
    `details.html?title=${encodeURIComponent(title)}&category=Movies&type=movies`;
});
</script>


</body>
</html>